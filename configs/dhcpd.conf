# DHCP Server Configuration for PXE Boot
# DHCP 服务器配置 - 用于 PXE 网络启动

# 全局配置
option domain-name "pxe.local";
option domain-name-servers 8.8.8.8, 8.8.4.4;
default-lease-time 600;
max-lease-time 7200;
ddns-update-style none;
authoritative;

# 如果这是唯一的服务器，取消下面这行的注释
# subnet 192.168.1.0 netmask 255.255.255.0 { }

# === 主要网络配置 ===
# 修改下面的网络参数以匹配你的网络环境
subnet 192.168.1.0 netmask 255.255.255.0 {
    # IP 地址池范围
    range 192.168.1.100 192.168.1.200;

    # 网关地址
    option routers 192.168.1.1;

    # 广播地址
    option broadcast-address 192.168.1.255;

    # 子网掩码
    option subnet-mask 255.255.255.0;

    # === PXE 关键配置 ===
    # TFTP 服务器地址（修改为你的 TFTP 服务器 IP）
    next-server 192.168.1.10;

    # 引导文件名（PXE 引导加载器）
    filename "pxelinux.0";

    # 如果使用 UEFI 启动，使用下面这行（需要支持 UEFI 的引导文件）
    # filename "efi64/syslinux.efi";
}

# === 固定 IP 分配（可选） ===
# 为特定的机器（通过 MAC 地址）分配固定 IP 和配置
# 示例：为 ESXi 虚拟机分配固定 IP
host vm-webserver-01 {
    hardware ethernet 00:0c:29:xx:xx:xx;
    fixed-address 192.168.1.101;
    option host-name "webserver-01";
}

host vm-dbserver-01 {
    hardware ethernet 00:0c:29:yy:yy:yy;
    fixed-address 192.168.1.102;
    option host-name "dbserver-01";
}

# === 其他网络配置示例 ===
# 如果你有多个网络段，可以添加更多 subnet 配置
# subnet 10.0.0.0 netmask 255.255.255.0 {
#     range 10.0.0.100 10.0.0.200;
#     option routers 10.0.0.1;
#     next-server 10.0.0.10;
#     filename "pxelinux.0";
# }
